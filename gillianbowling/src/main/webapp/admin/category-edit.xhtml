<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:p="http://primefaces.org/ui">

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="id" value="#{categoryManager.id}"/>
	</f:metadata>
</ui:define>

<ui:composition template="layout/template.xhtml">

<ui:param name="title" value="#{categoryManager.category.name}"/>

<ui:define name="breadcrumbs">
	<p:menuitem value="Categories" outcome="/admin/category-list.xhtml"/>

</ui:define>

	<ui:define name="body">

		<h:form id="category" styleClass="edit">

			<p:panel>

				<h:panelGrid columns="3" columnClasses="label, value, message" styleClass="detail-grid">

					<h:outputLabel for="fieldId" value="Id"/>
					<h:outputText id="fieldId" value="#{categoryManager.category.id}"/>
					<p:message for="fieldId"/>

					<h:outputLabel for="fieldParent" value="Id"/>
					<h:selectOneListbox id="fieldParent" value="#{categoryManager.category.parent}"
										styleClass="clientSelectBox" size="1" required="false" immediate="true">
						<f:selectItems value="#{categoryManager.availableParents}" var="_cat"
									   label="#{_cat.name}" noSelectionLabel="please choose..."/>
						<f:converter binding="#{categoryManager.converter}"/>
					</h:selectOneListbox>
					<p:message for="fieldParent"/>

					<h:outputLabel for="fieldName" value="Name"/>
					<h:inputText id="fieldName"
								 size="100"
								 maxlength="100"
								 value="#{categoryManager.category.name}" required="true"/>
					<p:message for="fieldName"/>

					<h:outputLabel for="fieldCode" value="Code"/>
					<h:inputText id="fieldCode"
								 size="100"
								 maxlength="100"
								 value="#{categoryManager.category.code}" required="true"/>
					<p:message for="fieldCode"/>

					<h:outputLabel for="fieldRank" value="Rank"/>
					<h:inputText id="fieldRank"
								 size="5"
								 maxlength="10"
								 value="#{categoryManager.category.rank}"/>
					<p:message for="fieldRank"/>


					<h:outputLabel for="fieldPhotoSort" value="Photo Sorting"/>
					<p:orderList id="fieldPhotoSort" value="#{categoryManager.photos}" var="_photo"
								 itemValue="#{_photo}"
								 converter="#{categoryManager.converter}"
								 controlsLocation="left">

						<f:facet name="caption">Photos</f:facet>

						<p:column style="width:25%">
							<h:outputText styleClass="ui-theme ui-theme-#{theme.name}"/>

							<h:outputText rendered="#{not empty _photo.fileName}">
								<img src="#{request.contextPath}/media/50x/#{_photo.fileName}" class="image"
									 alt="#{_photo.description}"/>
							</h:outputText>

						</p:column>

						<p:column style="width:75%;">
							<h:outputText rendered="#{empty _photo.fileName}" value="Text Block"/>
						</p:column>
					</p:orderList>
					<p:message for="fieldPhotoSort"/>

					<div style="clear:both">
						<span class="required">*</span>
						required fields
					</div>

				</h:panelGrid>
			</p:panel>

			<div class="actionButtons">

				<h:commandButton id="save"
								 value="Save"
								 action="#{categoryManager.save}"
								 />


			</div>
		</h:form>

	</ui:define>

</ui:composition>

</html>